(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[969],{61806:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return BaseComponent}});var C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69610),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54941),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63543),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94663),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81306),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96688),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),BaseComponent=function(_Component){(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__.Z)(BaseComponent,_Component);var _super=(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__.Z)(BaseComponent);function BaseComponent(){return(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.Z)(this,BaseComponent),_super.apply(this,arguments)}return(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.Z)(BaseComponent,[{key:"setStateSimple",value:function(key,value,callback){var _this=this,keyArr=key.split("."),state={},stateEval="state";keyArr.map(function(v,i){stateEval="".concat(stateEval,"['").concat(v,"']"),i===0?state[v]=_this.state[v]||{}:eval("".concat(stateEval," = ").concat(stateEval," || {}"))}),stateEval="".concat(stateEval,"=value"),eval(stateEval),(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.Z)(BaseComponent.prototype),"setState",this).call(this,state,callback)}}]),BaseComponent}(react__WEBPACK_IMPORTED_MODULE_0__.Component)},43600:function(I,m,_){"use strict";_.r(m),_.d(m,{default:function(){return w}});var y=_(8963),C=_(34441),p=_(8870),K=_(43185),D=_(98670),R=_(71194),O=_(50146),T=_(57663),E=_(71577),U=_(36017),r=_(35247),W=_(62350),P=_(75443),L=_(34792),d=_(48086),f=_(69610),M=_(54941),v=_(81306),g=_(96688),S=_(67294),c=_(99424),k=_(61806),n=_(25958),j=_(96190),h=_(73727),t=_(85893),w=function(B){(0,v.Z)(i,B);var b=(0,g.Z)(i);function i(){var o;(0,f.Z)(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return o=b.call.apply(b,[this].concat(s)),o.state={param:{label_id:o.props.match.params.id,page:1,page_rows:10},list:[],total:0,visible:!1,temp_data:{},loading:!1,is_uploading:!1},o.columns=[{title:"ID",dataIndex:"id"},{title:"\u56FE\u7247",render:function(l){return(0,t.jsx)("img",{height:120,alt:"\u6682\u65E0\u56FE\u7247",src:"/"+l.path})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at"},{title:"\u64CD\u4F5C",render:function(l){return(0,t.jsx)("div",{children:(0,t.jsx)(P.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:function(){(0,c.sz)("/api/auth/delImage",{ids:[l.id]}).then(function(A){A.code===200&&(d.default.success("\u5220\u9664\u6210\u529F"),o.fetch())})},children:(0,t.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})})}}],o}return(0,M.Z)(i,[{key:"componentDidMount",value:function(){this.fetch();var e=this;setInterval(function(){e.state.is_uploading&&(e.setStateSimple("is_uploading",!1),e.fetch())},1e3)}},{key:"fetch",value:function(){var e=this;this.setState({loading:!0},function(){(0,c.sz)("/api/auth/getImage",e.state.param).then(function(s){e.setStateSimple("list",s.info.list),e.setStateSimple("total",s.info.total),e.setStateSimple("loading",!1)})})}},{key:"render",value:function(){var e=this;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.Z,{style:{padding:20,paddingTop:0,paddingBottom:0},children:[(0,t.jsx)(r.Z.Item,{children:(0,t.jsx)(h.rU,{to:"/",children:(0,n.A8)()})}),(0,t.jsx)(r.Z.Item,{children:(0,t.jsx)(h.rU,{to:"/label/list",children:(0,n.A8)("/label/list")})}),(0,t.jsx)(r.Z.Item,{children:(0,t.jsxs)("a",{children:[(0,n.A8)("/label/list/:id/image"),(0,n.Wz)("name")&&" [ \u7C7B\u522B: "+(0,n.Wz)("name")+" ] "]})})]}),(0,t.jsx)("div",{style:{background:"white",padding:20,margin:"20px 0"},children:(0,t.jsxs)(D.Z,{name:"files",multiple:!0,action:"/api/auth/uploadImage",headers:{Authorization:(0,j.hP)()},onChange:function(a){a.file.status==="done"&&e.setStateSimple("is_uploading",!0)},data:{label_id:this.state.param.label_id},children:[(0,t.jsx)(E.Z,{type:"primary",children:"\u4E0A\u4F20"}),"\xA0 \xA0",(0,t.jsx)(E.Z,{onClick:function(a){if(a.stopPropagation(),!e.state.selectedRowKeys||e.state.selectedRowKeys.length===0)return d.default.warning("\u5220\u9664\u9009\u9879\u4E0D\u80FD\u4E3A\u7A7A"),!1;O.Z.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u76EE\u5417\uFF1F",onOk:function(){(0,c.sz)("/api/auth/delImage",{ids:e.state.selectedRowKeys}).then(function(l){l.code===200&&(d.default.success("\u5220\u9664\u6210\u529F"),e.fetch())})}})},type:"danger",children:"\u5220\u9664\u9009\u4E2D"})]})}),(0,t.jsx)(C.Z,{rowSelection:{onChange:function(a,u){e.setStateSimple("selectedRowKeys",a)}},onChange:function(a){e.setState({param:(0,p.Z)((0,p.Z)({},e.state.param),{},{page:a.current,page_rows:a.pageSize})},function(){e.fetch()})},pagination:{showSizeChanger:!0,current:this.state.param.page,total:this.state.total,pageSize:this.state.param.page_rows,showTotal:function(a){return(0,t.jsxs)("div",{children:["\u603B\u5171 ",a," \u6761\u6570\u636E"]})}},loading:this.state.loading,rowKey:"id",dataSource:this.state.list,columns:this.columns})]})}}]),i}(k.Z)}}]);
