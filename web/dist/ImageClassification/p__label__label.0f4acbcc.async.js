(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[998],{61806:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return BaseComponent}});var C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69610),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54941),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63543),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94663),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81306),C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96688),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),BaseComponent=function(_Component){(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__.Z)(BaseComponent,_Component);var _super=(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__.Z)(BaseComponent);function BaseComponent(){return(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.Z)(this,BaseComponent),_super.apply(this,arguments)}return(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.Z)(BaseComponent,[{key:"setStateSimple",value:function(key,value,callback){var _this=this,keyArr=key.split("."),state={},stateEval="state";keyArr.map(function(v,i){stateEval="".concat(stateEval,"['").concat(v,"']"),i===0?state[v]=_this.state[v]||{}:eval("".concat(stateEval," = ").concat(stateEval," || {}"))}),stateEval="".concat(stateEval,"=value"),eval(stateEval),(0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_work_docker_work_code_api_python_projects_image_classification_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.Z)(BaseComponent.prototype),"setState",this).call(this,state,callback)}}]),BaseComponent}(react__WEBPACK_IMPORTED_MODULE_0__.Component)},32759:function(w,u,_){"use strict";_.r(u),_.d(u,{default:function(){return y}});var K=_(9715),c=_(41003),S=_(8963),M=_(34441),U=_(47673),m=_(1011),i=_(8870),R=_(71194),p=_(50146),W=_(57663),E=_(71577),x=_(36017),d=_(35247),Z=_(62350),P=_(75443),F=_(34792),h=_(48086),z=_(48736),C=_(27049),v=_(69610),g=_(54941),B=_(81306),j=_(96688),G=_(67294),l=_(99424),k=_(61806),A=_(21010),I=_(73727),b=_(25958),t=_(85893),y=function(L){(0,B.Z)(n,L);var D=(0,j.Z)(n);function n(){var o;(0,v.Z)(this,n);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return o=D.call.apply(D,[this].concat(s)),o.state={param:{page:1,page_rows:10},list:[],total:0,visible:!1,temp_data:{},loading:!1,rebuild_index_loading:!1},o.columns=[{title:"ID",dataIndex:"id"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u56FE\u7247\u6570\u91CF",dataIndex:"image_count"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at"},{title:"\u64CD\u4F5C",render:function(r){return(0,t.jsxs)("div",{children:[(0,t.jsx)("a",{onClick:function(){A.m8.push("/label/list/"+r.id+"/image?name="+r.name)},children:"\u56FE\u7247\u7BA1\u7406"}),(0,t.jsx)(C.Z,{type:"vertical"}),(0,t.jsx)("a",{onClick:function(){o.setStateSimple("temp_data",r,function(){o.setStateSimple("visible",!0)})},children:"\u7F16\u8F91"}),(0,t.jsx)(C.Z,{type:"vertical"}),(0,t.jsx)(P.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:function(){(0,l.sz)("/api/auth/delLabel",{ids:[r.id]}).then(function(T){T.code===200&&(h.default.success("\u5220\u9664\u6210\u529F"),o.fetch())})},children:(0,t.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})]})}}],o}return(0,g.Z)(n,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;this.setState({loading:!0},function(){(0,l.sz)("/api/auth/getLabel",e.state.param).then(function(s){e.setStateSimple("list",s.info.list),e.setStateSimple("total",s.info.total),e.setStateSimple("loading",!1)})})}},{key:"render",value:function(){var e=this;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.Z,{style:{padding:20,paddingTop:0,paddingBottom:0},children:[(0,t.jsx)(d.Z.Item,{children:(0,t.jsx)(I.rU,{to:"/",children:(0,b.A8)()})}),(0,t.jsx)(d.Z.Item,{children:(0,t.jsx)("a",{children:(0,b.A8)("/label/list")})})]}),(0,t.jsxs)("div",{style:{background:"white",padding:20,margin:"20px 0"},children:[(0,t.jsx)(E.Z,{type:"primary",onClick:function(){e.setStateSimple("visible",!0)},children:"\u6DFB\u52A0"}),"\xA0 \xA0",(0,t.jsx)(E.Z,{type:"dashed",loading:this.state.rebuild_index_loading,onClick:function(){p.Z.confirm({icon:!1,title:"\u91CD\u5EFA\u7D22\u5F15\u63D0\u793A",content:"\u60A8\u662F\u5426\u786E\u5B9A\u57FA\u4E8E\u5F53\u524D\u6570\u636E\u91CD\u65B0\u521B\u5EFA\u7D22\u5F15\u6587\u4EF6\uFF1F",onOk:function(){e.setStateSimple("rebuild_index_loading",!0),(0,l.sz)("/api/auth/rebuildIndex").then(function(O){O.code===200&&e.setStateSimple("rebuild_index_loading",!1)})}})},children:"\u91CD\u5EFA\u7D22\u5F15"}),(0,t.jsx)(m.Z.Search,{style:{width:500,float:"right"},placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57",onSearch:function(a){e.setState({param:(0,i.Z)((0,i.Z)({},e.state.param),{},{search:a,page:1})},function(){e.fetch()})}})]}),(0,t.jsx)(M.Z,{onChange:function(a){e.setState({param:(0,i.Z)((0,i.Z)({},e.state.param),{},{page:a.current,page_rows:a.pageSize})},function(){e.fetch()})},pagination:{showSizeChanger:!0,current:this.state.param.page,total:this.state.total,pageSize:this.state.param.page_rows,showTotal:function(a){return(0,t.jsxs)("div",{children:["\u603B\u5171 ",a," \u6761\u6570\u636E"]})}},loading:this.state.loading,rowKey:"id",dataSource:this.state.list,columns:this.columns}),(0,t.jsx)(p.Z,{title:"\u6807\u7B7E",visible:this.state.visible,onCancel:function(){e.setStateSimple("visible",!1),e.setStateSimple("temp_data",{})},onOk:function(){(0,l.sz)("/api/auth/saveLabel",e.state.temp_data).then(function(a){a.code===200&&(h.default.success(a.message),e.setStateSimple("visible",!1),e.setStateSimple("temp_data",{}),e.fetch())})},children:(0,t.jsx)(c.Z,{labelCol:{span:4},wrapperCol:{span:20},autoComplete:"off",children:(0,t.jsx)(c.Z.Item,{label:"\u7C7B\u522B\u540D\u79F0",required:!0,children:(0,t.jsx)(m.Z,{placeholder:"\u8BF7\u8F93\u5165",onChange:function(a){e.setStateSimple("temp_data.name",a.target.value)},value:this.state.temp_data.name||""})})})})]})}}]),n}(k.Z)}}]);
